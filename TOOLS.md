# Tools and services used

## Tools

For the creation and maintenance of the DTA infrastructure, we are using the following tool

- go / golang
    Just a cool language that we are happy to able to use.
- [grpc.io](http://grpc.io)

```shell
brew install protobuf
brew install protoc-gen-go
rehash
```

- [grpc-gateway](https://github.com/grpc-ecosystem/grpc-gateway)
    The grpc-gateway is a plugin of the Google protocol buffers compiler protoc. It reads protobuf service definitions and generates a reverse-proxy server which 'translates a RESTful HTTP API into gRPC. This server is generated according to the google.api.http annotations in your service definitions.

    We are using this to create bi-protocol servers that support both GRPC and REST (optional) communication. Besides that, we are using the grpc-gateway to create the swagger specification from the proto specification.

```shell
go install \                                                         
    github.com/grpc-ecosystem/grpc-gateway/protoc-gen-grpc-gateway \
    github.com/grpc-ecosystem/grpc-gateway/protoc-gen-swagger \
    github.com/golang/protobuf/protoc-gen-go

go get github.com/mwitkow/go-proto-validators/protoc-gen-govalidators
rehash
```

- [github.com/go-swagger](https://github.com/go-swagger/go-swagger)
    go-swagger brings to the go community a complete suite of fully-featured, high-performance, API components to work with a Swagger API: server, client, and data model.

    We are using this to create REST clients, as well as to pilot REST only servers

    Example usage (from makefile):

    ```Makefile
    gen/rest_client/dtaservice_proto_client.go: swagger/dtaservice.swagger.json
    swagger generate client -c gen/rest_client -s gen/rest_api -m gen/rest_models -f swagger/dtaservice.swagger.json

    gen/rest_api/configure_dtaservice_proto.go: swagger/dtaservice.swagger.json
    swagger generate server -c gen/rest_client -s gen/rest_api -m gen/rest_models -f swagger/dtaservice.swagger.json
    ```

    code for clients is generated into `gen/rest_client` while code for servers is generated into `gen/rest_api`. The models reside in Â´gen/rest_models`

    For exchange format, we are using a JSON-formatted swagger file generated by the grpc-gateway.

```shell
brew tap go-swagger/go-swagger
brew install go-swagger
rehash
```

- [Docker](https://www.docker.com/)
    To build and deploy services

- [Vugu](https://www.vugu.org)
    To build a [web front-end](./doc/adr/0013-providing-a-sample-web-front-end-for-using-dta-services.md)

    Used the following steps to install the tools

```shell
go get -u github.com/vugu/vgrun
vgrun -install-tools
```

## Services used

- <https://api.ipify.org> Rational:[6. Determine the public IP addresss](0005-inventory-of-used-libraries-and-tools.md)
